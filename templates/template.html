{% extends "base.html" %}
{% block head %}
{{ super() }}
<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/lodash.js/4.17.10/lodash.min.js"></script>
<script src="{{ url_for('static', filename='findDuplicates.js') }}"></script>
<script src="{{ url_for('static', filename='alertPartialForms.js') }}"></script>
{% endblock %}
{% block main_tag_attributes %}{{ super() }} lang="{{ template.language_code }}" data-template='{{ template | tojson }}'{% endblock main_tag_attributes %}
{% block main %}
  <h1>{{ template.label }}</h1>
  {% if advanced %}
  <div class="alert alert-primary">
    {{ message( 'advanced_general' ) }}
    <ul>
      <li>{{ message( 'advanced_lexeme_id' ) }}</li>
      <li>{{ message( 'advanced_partial_forms' ) }}</li>
    </ul>
  </div>
  {% endif %}
  {% if csrf_error %}
  <div class="alert alert-warning">
    {{ message( 'csrf_warning' ) }}
  </div>
  {% endif %}
  {{ duplicates | render_duplicates(template.language_code) | safe }}
  <form method="post">
    <input name="_csrf_token" type="hidden" value="{{ csrf_token() }}">
    {% if advanced %}
    <label>
      {{ message( 'lexeme_id' ) }}
      <input name="lexeme_id" pattern="^L[1-9][0-9]*$" placeholder="L123" {% if template.lexeme_id %}value="{{ template.lexeme_id }}"{% endif %}>
    </label>
    {% endif %}
    <dl>
      {% for form in template.forms %}
      <dt>{{ form.label }}</dt>
      <dd>{{ form | form2input(loop.first) }}</dd>
      {% endfor %}
    </dl>
    {% if duplicates %}
    {{ render_no_duplicate(template.language_code) | safe }}
    {% endif %}
    <button class="btn btn-{% if not advanced %}primary{% else %}danger{% endif %}">{{ message( 'create' ) }}</button>
    {% if not advanced %}
    <button formnovalidate formaction="{{ url_for('process_template_advanced', template_name=template.template_name) }}" class="btn btn-secondary">{{ message( 'advanced' ) }}</button>
    {% endif %}
  </form>
{% endblock main %}
